<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Sentences & Vocab</title> 
    <link rel="manifest" href="/mk-vocab-p1-game/manifest.json">
    <link rel="apple-touch-icon" href="/mk-vocab-p1-game/images/icon-192x192.png">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Sarabun:wght@400;700&display=swap');

        :root {
            --color-pastel-pink: #FFC0CB;
            --color-pastel-blue: #ADD8E6;
            --color-pastel-green: #98FB98;
            --color-pastel-yellow: #F0E68C;
            --color-pastel-purple: #E6A9E6;
            --text-color-dark: #333;
            --text-color-light: #fff;
            --color-bg-light: #BDE0FF;
            --color-bg-dark: #FFC7D8;
        }

        body {
            font-family: 'Sarabun', sans-serif;
            background: linear-gradient(135deg, var(--color-bg-light), var(--color-bg-dark));
            color: var(--text-color-dark);
            margin: 0;
            padding: 0; 
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            text-align: center;
        }

        .container {
            background-color: var(--color-pastel-blue);
            padding: 2.5vh 1.5rem; 
            border-radius: 40px;
            box-shadow: 0 12px 30px rgba(0, 0, 0, 0.25);
            width: 100%;
            max-width: 650px;
            box-sizing: border-box;
            border: 6px solid var(--text-color-light);
            /* ‡πÄ‡∏û‡∏¥‡πà‡∏° Flexbox ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏´‡∏≤‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
            display: flex; 
            flex-direction: column;
            min-height: 95vh; 
        }

        h1 {
            color: var(--text-color-dark);
            font-size: 2.8em;
            text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1);
            margin: 0;
            padding-bottom: 1.5rem;
        }

        /* Category Page */
        #category-page { display: block; flex-grow: 1; display: flex; flex-direction: column; } 
        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
            flex-grow: 1; 
            align-content: start;
        }
        .category-button {
            background-color: var(--color-pastel-pink);
            color: var(--text-color-dark);
            border: none;
            padding: 1.5rem;
            border-radius: 30px; 
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 5px 0 #e4a2b9;
            transition: all 0.2s ease-in-out;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            gap: 10px;
        }
        .category-button:hover { transform: translateY(-3px); box-shadow: 0 8px 0 #e4a2b9; }
        .category-button:active { transform: translateY(1px); box-shadow: none; }
        .category-button .category-icon { font-size: 2.5em; line-height: 1; }
        .category-text { font-size: 0.9em; }

        /* Lesson Page */
        #lesson-page { display: none; flex-grow: 1; flex-direction: column; }
        #vocab-card {
            background-color: var(--color-pastel-yellow);
            border-radius: 30px;
            padding: 2.5rem;
            flex-grow: 1; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            border: 4px dashed var(--color-pastel-purple);
            margin-bottom: 1.5rem;
        }
        #thai-word {
            font-size: 2.5em;
            color: var(--text-color-dark);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            margin-bottom: 0.5rem;
        }
        #english-word {
            font-size: 1.8em;
            color: var(--text-color-dark);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            margin-bottom: 1rem;
        }

        .control-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 1rem;
            margin-top: 0.5rem; 
        }
        .control-group button {
            color: var(--text-color-light);
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            font-size: 1em;
            cursor: pointer;
            font-weight: bold;
            box-shadow: 0 4px 0 rgba(0, 0, 0, 0.2);
            transition: all 0.2s ease-in-out;
            flex-shrink: 0;
        }
        .control-group button:hover { transform: translateY(-2px); box-shadow: 0 6px 0 rgba(0, 0, 0, 0.2); }
        .control-group button:active { transform: translateY(1px); box-shadow: none; }
        .control-group button:disabled { background-color: #ccc; cursor: not-allowed; box-shadow: none; }

        .audio-btn { background-color: var(--color-pastel-green); box-shadow: 0 4px 0 #85d685; }
        .nav-btn { background-color: var(--color-pastel-purple); box-shadow: 0 4px 0 #cc99cc; }
        .play-btn { background-color: var(--color-pastel-blue); box-shadow: 0 4px 0 #89b1c9; }
        .back-btn { background-color: #a9a9a9; box-shadow: 0 4px 0 #8b8b8b; }
        
        /* ---------------------------------------------------------------------- */
        /* MEDIA QUERY: ‡∏õ‡∏£‡∏±‡∏ö‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡πÄ‡∏ï‡πá‡∏°‡∏à‡∏≠‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á */
        /* ---------------------------------------------------------------------- */
        @media screen and (max-width: 600px) and (orientation: portrait) {
            
            body {
                align-items: stretch; 
            }

            .container {
                padding: 1.5vh 0.5rem; 
                width: 100%;
                max-width: none; 
                min-height: 100vh; 
                border-radius: 0; 
                border: none; 
                box-shadow: none; 
            }

            h1 {
                font-size: 2.2em; 
                padding-bottom: 1rem;
            }

            /* Category Page */
            .category-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr)); 
                gap: 0.75rem; 
            }
            .category-button {
                padding: 1rem 0.5rem;
                font-size: 0.9em;
                border-radius: 15px;
            }
            .category-button .category-icon { font-size: 2em; } 

            /* Lesson Page */
            #vocab-card {
                padding: 1.5rem;
            }
            #thai-word {
                font-size: 2em; 
            }
            #english-word {
                font-size: 1.5em; 
            }
            
            .control-group {
                gap: 0.5rem;
            }
            .control-group button {
                padding: 10px 15px;
                font-size: 0.9em;
                flex-grow: 1; 
            }
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="category-page">
            <h1>‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏Ñ‡∏≥‡∏®‡∏±‡∏û‡∏ó‡πå‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ</h1>
            <div id="category-grid" class="category-grid"></div>
        </div>

        <div id="lesson-page">
            <h1 id="lesson-title"></h1>
            <div id="vocab-card">
                <span id="thai-word" class="word"></span>
                <span id="english-word" class="word"></span>
            </div>
            
            <div class="control-group">
                <button id="prev-btn" class="nav-btn">‚óÄÔ∏è ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö</button>
                <button id="next-btn" class="nav-btn">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ ‚ñ∂Ô∏è</button>
            </div>
            <div class="control-group">
                <button onclick="speakText(currentVocab.thai, 'th-TH')" class="audio-btn">‡∏ü‡∏±‡∏á (‡πÑ‡∏ó‡∏¢) üîä</button>
                <button onclick="speakText(currentVocab.english, 'en-US')" class="audio-btn">Listen (EN) üîä</button>
            </div>
            <div class="control-group">
                <button id="play-pause-btn" class="play-btn">Play ‚ñ∂Ô∏è</button>
                <button id="stop-btn" class="back-btn">Stop ‚èπÔ∏è</button>
                <button id="back-to-cat-btn" class="back-btn">Back to Categories üè†</button>
            </div>
        </div>
    </div>

    <script>
        const vocabularyData = {
            "‡∏Ñ‡∏≥‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏±‡∏ß": [
                { thai: "‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ", english: "Hello." },
                { thai: "‡∏â‡∏±‡∏ô‡∏ä‡∏∑‡πà‡∏≠...", english: "My name is..." },
                { thai: "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å", english: "Nice to meet you." },
                { thai: "‡∏™‡∏ö‡∏≤‡∏¢‡∏î‡∏µ‡πÑ‡∏´‡∏°", english: "How are you?" },
                { thai: "‡∏â‡∏±‡∏ô‡∏™‡∏ö‡∏≤‡∏¢‡∏î‡∏µ ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì", english: "I am fine, thank you." },
                { thai: "‡∏•‡∏≤‡∏Å‡πà‡∏≠‡∏ô", english: "Goodbye." },
                { thai: "‡∏≠‡∏£‡∏∏‡∏ì‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏¥‡πå", english: "Good morning." },
                { thai: "‡∏ù‡∏±‡∏ô‡∏î‡∏µ‡∏ô‡∏∞", english: "Good night." },
                { thai: "‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏à‡∏≠‡∏Å‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà", english: "See you again." },
                { thai: "‡∏Ç‡∏≠‡πÇ‡∏ó‡∏©‡∏ô‡∏∞", english: "Excuse me." },
                { thai: "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏Å", english: "Thank you very much." },
                { thai: "‡∏Ç‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏´‡∏ô‡πà‡∏≠‡∏¢", english: "Could you help me?" },
                { thai: "‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£", english: "I am okay." },
                { thai: "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡πÉ‡∏´‡πâ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠", english: "You're welcome." },
                { thai: "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á", english: "How's your day?" },
                { thai: "‡∏°‡∏µ‡∏≠‡∏∞‡πÑ‡∏£‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢‡πÑ‡∏´‡∏°", english: "Can I help you?" },
                { thai: "‡πÇ‡∏ä‡∏Ñ‡∏î‡∏µ‡∏ô‡∏∞", english: "Good luck!" },
                { thai: "‡∏î‡∏π‡πÅ‡∏•‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞", english: "Take care." },
                { thai: "‡∏™‡∏∏‡∏Ç‡∏™‡∏±‡∏ô‡∏ï‡πå‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î", english: "Happy birthday." },
                { thai: "‡∏≠‡∏£‡πà‡∏≠‡∏¢‡∏°‡∏≤‡∏Å", english: "It's delicious." }
            ],
            "‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏á‡πà‡∏≤‡∏¢‡πÜ": [
                { thai: "‡∏ô‡∏±‡πà‡∏á‡∏•‡∏á", english: "Sit down." },
                { thai: "‡∏¢‡∏∑‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô", english: "Stand up." },
                { thai: "‡∏°‡∏≤‡∏ô‡∏µ‡πà", english: "Come here." },
                { thai: "‡πÑ‡∏õ‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏ô", english: "Go there." },
                { thai: "‡πÄ‡∏á‡∏µ‡∏¢‡∏ö‡πÜ", english: "Be quiet." },
                { thai: "‡∏ü‡∏±‡∏á‡∏â‡∏±‡∏ô", english: "Listen to me." },
                { thai: "‡∏°‡∏≠‡∏á‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà", english: "Look at me." },
                { thai: "‡∏ä‡πà‡∏ß‡∏¢‡∏â‡∏±‡∏ô‡∏´‡∏ô‡πà‡∏≠‡∏¢", english: "Help me." },
                { thai: "‡πÄ‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏∞‡∏ï‡∏π", english: "Open the door." },
                { thai: "‡∏õ‡∏¥‡∏î‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á", english: "Close the window." },
                { thai: "‡∏´‡πâ‡∏≤‡∏°‡∏ß‡∏¥‡πà‡∏á", english: "Don't run." },
                { thai: "‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì", english: "Write your name." },
                { thai: "‡∏≠‡πà‡∏≤‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á‡πÜ", english: "Read aloud." },
                { thai: "‡∏£‡∏∞‡∏ö‡∏≤‡∏¢‡∏™‡∏µ‡∏£‡∏π‡∏õ‡∏ô‡∏µ‡πâ", english: "Color this picture." },
                { thai: "‡∏à‡∏±‡∏î‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏£‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ö", english: "Tidy up the room." },
                { thai: "‡∏•‡πâ‡∏≤‡∏á‡∏°‡∏∑‡∏≠‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì", english: "Wash your hands." },
                { thai: "‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÇ‡∏ï‡πä‡∏∞", english: "Clean the table." },
                { thai: "‡∏¢‡∏Å‡∏°‡∏∑‡∏≠‡∏Ç‡∏∂‡πâ‡∏ô", english: "Raise your hand." },
                { thai: "‡∏ß‡∏≤‡∏á‡∏î‡∏¥‡∏ô‡∏™‡∏≠‡∏•‡∏á", english: "Put down the pencil." },
                { thai: "‡∏ï‡∏≤‡∏°‡∏â‡∏±‡∏ô‡∏°‡∏≤", english: "Follow me." }
            ],
            "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ö‡∏≠‡∏Å‡πÄ‡∏•‡πà‡∏≤": [
                { thai: "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡πÅ‡∏≠‡∏õ‡πÄ‡∏õ‡∏¥‡πâ‡∏•", english: "I like apples." },
                { thai: "‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏™‡∏∏‡∏ô‡∏±‡∏Ç‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏ï‡∏±‡∏ß", english: "I have one dog." },
                { thai: "‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤‡∏°‡∏µ‡∏™‡∏µ‡∏ü‡πâ‡∏≤", english: "The sky is blue." },
                { thai: "‡∏£‡∏ñ‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏£‡πá‡∏ß", english: "The car is fast." },
                { thai: "‡∏â‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠", english: "I am reading a book." },
                { thai: "‡∏â‡∏±‡∏ô‡πÑ‡∏õ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô", english: "I go to school every day." },
                { thai: "‡πÅ‡∏°‡πà‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏£‡πà‡∏≠‡∏¢", english: "My mom cooks delicious food." },
                { thai: "‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÉ‡∏´‡∏°‡πà", english: "I have a new toy." },
                { thai: "‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏î‡∏µ", english: "The weather is nice today." },
                { thai: "‡∏â‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Å‡∏°", english: "I am playing a game." },
                { thai: "‡∏â‡∏±‡∏ô‡∏£‡∏±‡∏Å‡∏Ñ‡∏∏‡∏ì", english: "I love you." },
                { thai: "‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏°‡∏µ‡∏Å‡∏•‡∏¥‡πà‡∏ô‡∏´‡∏≠‡∏°", english: "The flower smells fragrant." },
                { thai: "‡∏â‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏ö‡∏¥‡∏ô", english: "I see a butterfly flying." },
                { thai: "‡∏â‡∏±‡∏ô‡πÑ‡∏õ‡∏ã‡∏∑‡πâ‡∏≠‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏•‡∏≤‡∏î", english: "I went shopping at the market." },
                { thai: "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡πÑ‡∏≠‡∏®‡∏Å‡∏£‡∏µ‡∏°", english: "I like to eat ice cream." },
                { thai: "‡∏â‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏π‡∏ó‡∏µ‡∏ß‡∏µ", english: "I am watching TV." },
                { thai: "‡∏â‡∏±‡∏ô‡∏î‡∏∑‡πà‡∏°‡∏ô‡∏°‡∏ó‡∏∏‡∏Å‡πÄ‡∏ä‡πâ‡∏≤", english: "I drink milk every morning." },
                { thai: "‡∏â‡∏±‡∏ô‡πÉ‡∏™‡πà‡πÄ‡∏™‡∏∑‡πâ‡∏≠‡∏™‡∏µ‡πÅ‡∏î‡∏á", english: "I am wearing a red shirt." },
                { thai: "‡∏û‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥‡∏á‡∏≤‡∏ô", english: "My dad is working." },
                { thai: "‡∏ô‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡πâ‡∏≠‡∏á‡πÄ‡∏û‡∏•‡∏á", english: "The bird is singing." }
            ],
            "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°": [
                { thai: "‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£", english: "What is this?" },
                { thai: "‡πÄ‡∏ò‡∏≠‡πÄ‡∏õ‡πá‡∏ô‡πÉ‡∏Ñ‡∏£", english: "Who are you?" },
                { thai: "‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô", english: "Where is this place?" },
                { thai: "‡πÑ‡∏õ‡∏ï‡∏≠‡∏ô‡πÑ‡∏´‡∏ô", english: "When do we go?" },
                { thai: "‡∏ó‡∏≥‡πÑ‡∏°‡∏ñ‡∏∂‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ", english: "Why is it like this?" },
                { thai: "‡πÄ‡∏ò‡∏≠‡∏à‡∏∞‡πÑ‡∏õ‡∏Å‡∏±‡∏ö‡∏â‡∏±‡∏ô‡πÑ‡∏´‡∏°", english: "Will you go with me?" },
                { thai: "‡πÄ‡∏ò‡∏≠‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏≠‡∏∞‡πÑ‡∏£", english: "What do you want?" },
                { thai: "‡πÄ‡∏ò‡∏≠‡∏™‡∏ö‡∏≤‡∏¢‡∏î‡∏µ‡πÑ‡∏´‡∏°", english: "Are you okay?" },
                { thai: "‡∏ö‡πâ‡∏≤‡∏ô‡πÄ‡∏ò‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô", english: "Where is your house?" },
                { thai: "‡πÄ‡∏£‡∏≤‡∏à‡∏∞‡πÑ‡∏õ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏´‡∏£‡πà", english: "When will we go?" },
                { thai: "‡πÄ‡∏ò‡∏≠‡∏ä‡∏≠‡∏ö‡∏≠‡∏∞‡πÑ‡∏£", english: "What do you like?" },
                { thai: "‡∏Å‡∏¥‡∏ô‡∏Ç‡πâ‡∏≤‡∏ß‡∏´‡∏£‡∏∑‡∏≠‡∏¢‡∏±‡∏á", english: "Have you eaten yet?" },
                { thai: "‡πÄ‡∏ò‡∏≠‡∏à‡∏∞‡πÄ‡∏•‡πà‡∏ô‡∏Å‡∏±‡∏ö‡∏â‡∏±‡∏ô‡πÑ‡∏´‡∏°", english: "Will you play with me?" },
                { thai: "‡πÄ‡∏ò‡∏≠‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£", english: "How do you feel?" },
                { thai: "‡∏Ç‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏ô‡∏ä‡∏¥‡πâ‡∏ô‡∏ô‡∏µ‡πâ‡∏Ç‡∏≠‡∏á‡πÉ‡∏Ñ‡∏£", english: "Whose toy is this?" },
                { thai: "‡∏Ñ‡∏∏‡∏ì‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏°‡∏≠‡∏á‡∏´‡∏≤‡∏≠‡∏∞‡πÑ‡∏£‡∏≠‡∏¢‡∏π‡πà", english: "What are you looking for?" },
                { thai: "‡∏°‡∏±‡∏ô‡∏£‡∏≤‡∏Ñ‡∏≤‡πÄ‡∏ó‡πà‡∏≤‡πÑ‡∏´‡∏£‡πà", english: "How much is it?" },
                { thai: "‡∏Ñ‡∏∏‡∏ì‡∏°‡∏≤‡∏à‡∏≤‡∏Å‡πÑ‡∏´‡∏ô", english: "Where are you from?" },
                { thai: "‡∏â‡∏±‡∏ô‡∏Ñ‡∏ß‡∏£‡∏ó‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£", english: "What should I do?" },
                { thai: "‡∏Ñ‡∏∏‡∏ì‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏∞‡πÑ‡∏£", english: "What is your name?" }
            ],
            "‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡∏≤": [
                { thai: "‡∏â‡∏±‡∏ô‡∏≠‡∏≤‡∏¢‡∏∏ 7 ‡∏Ç‡∏ß‡∏ö", english: "I am 7 years old." },
                { thai: "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡∏û‡∏¥‡∏ã‡∏ã‡πà‡∏≤", english: "I like to eat pizza." },
                { thai: "‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏ú‡∏°‡∏™‡∏µ‡∏î‡∏≥", english: "I have black hair." },
                { thai: "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏ß‡∏≤‡∏î‡∏£‡∏π‡∏õ", english: "I like to draw." },
                { thai: "‡∏â‡∏±‡∏ô‡∏£‡∏±‡∏Å‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß", english: "I love my family." },
                { thai: "‡∏â‡∏±‡∏ô‡∏°‡∏µ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô", english: "I have many friends." },
                { thai: "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡πÄ‡∏•‡πà‡∏ô‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•", english: "I like to play football." },
                { thai: "‡∏â‡∏±‡∏ô‡πÑ‡∏õ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏ñ‡∏ö‡∏±‡∏™", english: "I go to school by bus." },
                { thai: "‡∏â‡∏±‡∏ô‡∏ä‡πà‡∏ß‡∏¢‡πÅ‡∏°‡πà‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏ö‡πâ‡∏≤‡∏ô", english: "I help my mom clean the house." },
                { thai: "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏ü‡∏±‡∏á‡πÄ‡∏û‡∏•‡∏á", english: "I like to listen to music." },
                { thai: "‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏ô‡πâ‡∏≠‡∏á‡∏ä‡∏≤‡∏¢‡∏´‡∏ô‡∏∂‡πà‡∏á‡∏Ñ‡∏ô", english: "I have one younger brother." },
                { thai: "‡∏â‡∏±‡∏ô‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ö‡πâ‡∏≤‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÉ‡∏´‡∏ç‡πà", english: "I live in a big house." },
                { thai: "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏≠‡πà‡∏≤‡∏ô‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πå‡∏ï‡∏π‡∏ô", english: "I like to read comics." },
                { thai: "‡∏â‡∏±‡∏ô‡∏ä‡∏≠‡∏ö‡∏™‡∏µ‡∏ü‡πâ‡∏≤", english: "I like the color blue." },
                { thai: "‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏ï‡∏∏‡∏•‡∏≤‡∏Ñ‡∏°", english: "My birthday is in October." },
                { thai: "‡∏â‡∏±‡∏ô‡∏™‡∏π‡∏á", english: "I am tall." },
                { thai: "‡∏â‡∏±‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô", english: "I am a student." },
                { thai: "‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏ä‡∏≠‡∏ö‡∏Å‡∏¥‡∏ô‡∏ú‡∏±‡∏Å", english: "I don't like to eat vegetables." },
                { thai: "‡∏â‡∏±‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡∏≠‡∏±‡∏á‡∏Å‡∏§‡∏©", english: "I am learning English." },
                { thai: "‡∏â‡∏±‡∏ô‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç‡∏°‡∏≤‡∏Å", english: "I am very happy." }
            ],
            "‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏ß": [
                { thai: "‡∏ô‡∏µ‡πà‡∏Ñ‡∏∑‡∏≠‡πÇ‡∏ï‡πä‡∏∞", english: "This is a table." },
                { thai: "‡∏ô‡∏±‡πà‡∏ô‡∏Ñ‡∏∑‡∏≠‡πÄ‡∏Å‡πâ‡∏≤‡∏≠‡∏µ‡πâ", english: "That is a chair." },
                { thai: "‡∏ô‡∏Å‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ö‡∏¥‡∏ô", english: "The bird is flying." },
                { thai: "‡∏î‡∏ß‡∏á‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏Ç‡∏∂‡πâ‡∏ô", english: "The sun is rising." },
                { thai: "‡∏°‡∏µ‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ‡∏™‡∏ß‡∏¢‡πÜ", english: "There are beautiful flowers." },
                { thai: "‡∏ù‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏Å", english: "It is raining." },
                { thai: "‡∏£‡∏ñ‡∏Ç‡∏≠‡∏á‡∏û‡πà‡∏≠‡∏™‡∏µ‡πÅ‡∏î‡∏á", english: "My dad's car is red." },
                { thai: "‡∏°‡∏µ‡πÅ‡∏°‡∏ß‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ñ‡∏≤", english: "There is a cat on the roof." },
                { thai: "‡∏â‡∏±‡∏ô‡πÄ‡∏´‡πá‡∏ô‡∏ú‡∏µ‡πÄ‡∏™‡∏∑‡πâ‡∏≠", english: "I see a butterfly." },
                { thai: "‡πÄ‡∏£‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡πÉ‡∏ô‡∏™‡∏ß‡∏ô", english: "We are walking in the park." },
                { thai: "‡∏°‡∏µ‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÉ‡∏´‡∏ç‡πà‡πÜ", english: "There are big trees." },
                { thai: "‡∏´‡∏¥‡∏°‡∏∞‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏Å", english: "It is snowing." },
                { thai: "‡πÉ‡∏ö‡πÑ‡∏°‡πâ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ", english: "The leaves are changing color." },
                { thai: "‡∏°‡∏µ‡πÄ‡∏°‡∏Ü‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡∏ö‡∏ô‡∏ó‡πâ‡∏≠‡∏á‡∏ü‡πâ‡∏≤", english: "There are white clouds in the sky." },
                { thai: "‡πÅ‡∏™‡∏á‡πÅ‡∏î‡∏î‡∏™‡πà‡∏≠‡∏á‡∏ú‡πà‡∏≤‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡πà‡∏≤‡∏á", english: "The sun is shining through the window." },
                { thai: "‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏ä‡∏±‡πâ‡∏ô‡∏ß‡∏≤‡∏á", english: "The book is on the shelf." },
                { thai: "‡πÅ‡∏°‡πà‡∏ô‡πâ‡∏≥‡πÑ‡∏´‡∏•‡πÄ‡∏£‡πá‡∏ß", english: "The river flows fast." },
                { thai: "‡∏°‡∏µ‡∏Ñ‡∏ô‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ß‡∏¥‡πà‡∏á‡∏≠‡∏¢‡∏π‡πà", english: "Someone is running." },
                { thai: "‡∏ñ‡∏ô‡∏ô‡πÄ‡∏õ‡∏µ‡∏¢‡∏Å", english: "The road is wet." },
                { thai: "‡∏°‡∏µ‡∏ï‡∏∂‡∏Å‡∏™‡∏π‡∏á‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢", english: "There are many tall buildings." }
            ],
            "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏õ‡∏é‡∏¥‡πÄ‡∏™‡∏ò‡∏á‡πà‡∏≤‡∏¢‡πÜ": [
                { thai: "‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏ä‡∏≠‡∏ö‡∏™‡∏¥‡πà‡∏á‡∏ô‡∏µ‡πâ", english: "I don't like this." },
                { thai: "‡∏°‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏õ‡∏≤‡∏Å‡∏Å‡∏≤‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô", english: "It is not my pen." },
                { thai: "‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏û‡∏µ‡πà‡∏ä‡∏≤‡∏¢", english: "I don't have a brother." },
                { thai: "‡πÄ‡∏ò‡∏≠‡πÑ‡∏°‡πà‡πÑ‡∏õ‡πÇ‡∏£‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ", english: "She is not going to school today." },
                { thai: "‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏•‡πâ‡∏ß", english: "We don't have time." },
                { thai: "‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏´‡∏¥‡∏ß", english: "I am not hungry." },
                { thai: "‡∏ô‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô", english: "This is not my fault." },
                { thai: "‡∏û‡∏ß‡∏Å‡πÄ‡∏Ç‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô", english: "They are not my friends." },
                { thai: "‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏û‡∏π‡∏î", english: "I don't understand what you said." },
                { thai: "‡∏´‡πâ‡∏≤‡∏°‡πÅ‡∏ï‡∏∞‡∏ï‡πâ‡∏≠‡∏á", english: "Do not touch." },
                { thai: "‡∏â‡∏±‡∏ô‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏°‡∏±‡∏ô", english: "I will not do it." },
                { thai: "‡∏ô‡∏µ‡πà‡πÑ‡∏°‡πà‡∏à‡∏£‡∏¥‡∏á", english: "This is not true." },
                { thai: "‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡πÄ‡∏´‡πá‡∏ô‡∏°‡∏±‡∏ô‡∏°‡∏≤‡∏Å‡πà‡∏≠‡∏ô", english: "I have never seen it before." },
                { thai: "‡∏°‡∏±‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏û‡∏£‡πâ‡∏≠‡∏°", english: "It is not ready yet." },
                { thai: "‡πÄ‡∏ò‡∏≠‡πÑ‡∏°‡πà‡∏ä‡∏≠‡∏ö‡πÄ‡∏•‡πà‡∏ô‡∏Ç‡πâ‡∏≤‡∏á‡∏ô‡∏≠‡∏Å", english: "She doesn't like to play outside." },
                { thai: "‡∏°‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç", english: "It does not matter." },
                { thai: "‡∏≠‡∏¢‡πà‡∏≤‡∏ß‡∏¥‡πà‡∏á", english: "Don't run." },
                { thai: "‡∏â‡∏±‡∏ô‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ", english: "I don't know." },
                { thai: "‡∏≠‡∏¢‡πà‡∏≤‡∏™‡πà‡∏á‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡∏±‡∏á", english: "Do not make noise." }
            ],
            "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏≠‡∏∏‡∏ó‡∏≤‡∏ô": [
                { thai: "‡∏ß‡πâ‡∏≤‡∏ß!", english: "Wow!" },
                { thai: "‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î!", english: "Awesome!" },
                { thai: "‡πÑ‡∏°‡πà‡∏ô‡πà‡∏≤‡πÄ‡∏ä‡∏∑‡πà‡∏≠!", english: "Unbelievable!" },
                { thai: "‡πÇ‡∏≠‡πä‡∏¢! ‡πÄ‡∏à‡πá‡∏ö!", english: "Ouch! It hurts!" },
                { thai: "‡∏£‡∏∞‡∏ß‡∏±‡∏á!", english: "Look out! / Watch out!" },
                { thai: "‡∏ä‡πà‡∏ß‡∏¢‡∏î‡πâ‡∏ß‡∏¢!", english: "Help!" },
                { thai: "‡πÄ‡∏¢‡∏µ‡πà‡∏¢‡∏°‡∏°‡∏≤‡∏Å!", english: "Great! / Excellent!" },
                { thai: "‡πÅ‡∏¢‡πà‡∏à‡∏±‡∏á!", english: "Too bad!" },
                { thai: "‡∏ó‡∏≥‡πÑ‡∏°‡∏ô‡∏∞!", english: "Why!" },
                { thai: "‡∏à‡∏£‡∏¥‡∏á‡πÄ‡∏´‡∏£‡∏≠!", english: "Really!" },
                { thai: "‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà‡πÄ‡∏≠‡∏á!", english: "Here it is!" },
                { thai: "‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß!", english: "Finished!" },
                { thai: "‡πÄ‡∏£‡πá‡∏ß‡πÄ‡∏Ç‡πâ‡∏≤!", english: "Hurry up!" },
                { thai: "‡πÇ‡∏≠‡πâ‡∏û‡∏£‡∏∞‡πÄ‡∏à‡πâ‡∏≤!", english: "Oh my god!" },
                { thai: "‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏à‡∏±‡∏á!", english: "So cute!" },
                { thai: "‡∏ô‡πà‡∏≤‡∏Å‡∏•‡∏±‡∏ß‡∏°‡∏≤‡∏Å!", english: "So scary!" },
                { thai: "‡∏â‡∏±‡∏ô‡πÄ‡∏´‡∏ô‡∏∑‡πà‡∏≠‡∏¢‡∏°‡∏≤‡∏Å!", english: "I'm so tired!" },
                { thai: "‡∏â‡∏±‡∏ô‡∏î‡∏µ‡πÉ‡∏à‡∏°‡∏≤‡∏Å!", english: "I'm so happy!" },
                { thai: "‡πÑ‡∏°‡πà‡∏ô‡∏∞!", english: "No!" },
                { thai: "‡∏î‡∏µ‡πÉ‡∏à‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞!", english: "Congratulations!" }
            ]
        };

        const categoryPage = document.getElementById('category-page');
        const lessonPage = document.getElementById('lesson-page');
        const categoryGrid = document.getElementById('category-grid');
        const lessonTitle = document.getElementById('lesson-title');
        const thaiWord = document.getElementById('thai-word');
        const englishWord = document.getElementById('english-word');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const nextBtn = document.getElementById('next-btn');
        const prevBtn = document.getElementById('prev-btn');
        const backToCatBtn = document.getElementById('back-to-cat-btn');
        const stopBtn = document.getElementById('stop-btn');

        let currentCategoryVocabs = [];
        let currentIndex = 0;
        let isPlaying = false;
        let voices = [];
        
        // --- Web Speech API ---
        if ('speechSynthesis' in window) {
            window.speechSynthesis.onvoiceschanged = () => {
                voices = window.speechSynthesis.getVoices();
            };
        }

        function speakText(text, lang, onEndCallback = null) {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = lang;
                
                // Adjust volume based on language
                if (lang === 'th-TH') {
                    utterance.volume = 1.1; // Increased volume for Thai
                } else {
                    utterance.volume = 1;
                }

                let targetVoice = null;
                // Find a good voice for Thai
                if (lang === 'th-TH') {
                    targetVoice = voices.find(v => v.lang.startsWith('th-TH') && v.name.includes('Lekha'));
                    if (!targetVoice) { 
                        targetVoice = voices.find(v => v.lang.startsWith('th-TH'));
                    }
                } 
                // Find a good voice for English
                else if (lang === 'en-US') {
                    targetVoice = voices.find(v => v.lang.startsWith('en-US') && v.name.includes('Samantha'));
                    if (!targetVoice) { 
                        targetVoice = voices.find(v => v.lang.startsWith('en-US'));
                    }
                }
                
                if (targetVoice) {
                    utterance.voice = targetVoice;
                }

                if (onEndCallback) {
                    utterance.onend = onEndCallback;
                }
                window.speechSynthesis.speak(utterance);
            }
        }

        // --- PWA Service Worker ---
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/mk-vocab-p1-game/sw.js', { scope: '/mk-vocab-p1-game/' })
                    .then(registration => console.log('Service Worker registered.'))
                    .catch(err => console.log('Service Worker registration failed.', err));
            });
        }
        
        // --- Game Logic ---
        function createCategoryButtons() {
            const categoryMap = {
                "‡∏Ñ‡∏≥‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏±‡∏ß": "üëã",
                "‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏á‡πà‡∏≤‡∏¢‡πÜ": "üó£Ô∏è",
                "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ö‡∏≠‡∏Å‡πÄ‡∏•‡πà‡∏≤": "üí¨",
                "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°": "‚ùì",
                "‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡∏≤": "üë¶",
                "‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏ß": "üè†",
                "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏õ‡∏é‡∏¥‡πÄ‡∏™‡∏ò‡∏á‡πà‡∏≤‡∏¢‡πÜ": "üö´",
                "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏≠‡∏∏‡∏ó‡∏≤‡∏ô": "üòÆ"
            };

            const categoryColors = {
                "‡∏Ñ‡∏≥‡∏ó‡∏±‡∏Å‡∏ó‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏±‡∏ß": "#b9d8ff",
                "‡∏Ñ‡∏≥‡∏™‡∏±‡πà‡∏á‡∏á‡πà‡∏≤‡∏¢‡πÜ": "#ffb6c1",
                "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏ö‡∏≠‡∏Å‡πÄ‡∏•‡πà‡∏≤": "#a9def9",
                "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°": "#cbe6a3",
                "‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡∏≤": "#fde8ae",
                "‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡πá‡∏ô‡∏£‡∏≠‡∏ö‡∏ï‡∏±‡∏ß": "#ffb399",
                "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏õ‡∏é‡∏¥‡πÄ‡∏™‡∏ò‡∏á‡πà‡∏≤‡∏¢‡πÜ": "#ff6961",
                "‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏Ñ‡∏≠‡∏∏‡∏ó‡∏≤‡∏ô": "#ffebcd" 
            };

            for (const category in vocabularyData) {
                const button = document.createElement('button');
                button.className = 'category-button';
                button.innerHTML = `
                    <span class="category-icon">${categoryMap[category] || 'üí°'}</span>
                    <span class="category-text">${category}</span>
                `;
                button.style.backgroundColor = categoryColors[category] || '#e1bee7';
                button.addEventListener('click', () => startLesson(category));
                categoryGrid.appendChild(button);
            }
        }

        function startLesson(category) {
            currentCategoryVocabs = vocabularyData[category];
            lessonTitle.textContent = category;
            currentIndex = 0;
            displayVocab();
            categoryPage.style.display = 'none';
            lessonPage.style.display = 'flex';
            updateButtonState();
        }

        function displayVocab() {
            if (currentIndex < currentCategoryVocabs.length) {
                currentVocab = currentCategoryVocabs[currentIndex];
                thaiWord.textContent = currentVocab.thai;
                englishWord.textContent = currentVocab.english;
            } else {
                thaiWord.textContent = "‡∏à‡∏ö‡πÅ‡∏•‡πâ‡∏ß!";
                englishWord.textContent = "Finished!";
                stopAutoPlay();
            }
        }

        function updateButtonState() {
            prevBtn.disabled = currentIndex === 0;
            nextBtn.disabled = currentIndex >= currentCategoryVocabs.length - 1;
            playPauseBtn.textContent = isPlaying ? 'Pause ‚è∏Ô∏è' : 'Play ‚ñ∂Ô∏è';
        }

        function nextVocab() {
            if (currentIndex < currentCategoryVocabs.length - 1) {
                currentIndex++;
                displayVocab();
                updateButtonState();
            }
        }
        
        function prevVocab() {
            if (currentIndex > 0) {
                currentIndex--;
                displayVocab();
                updateButtonState();
            }
        }

        function playCurrentVocabAuto() {
            if (currentIndex >= currentCategoryVocabs.length) {
                stopAutoPlay();
                return;
            }
            const currentVocab = currentCategoryVocabs[currentIndex];
            
            speakText(currentVocab.thai, 'th-TH', () => {
                speakText(currentVocab.english, 'en-US', () => {
                    if (isPlaying) {
                        currentIndex++;
                        displayVocab();
                        updateButtonState();
                        playCurrentVocabAuto();
                    }
                });
            });
        }

        function toggleAutoPlay() {
            if (isPlaying) {
                stopAutoPlay();
            } else {
                isPlaying = true;
                updateButtonState();
                if (currentIndex >= currentCategoryVocabs.length) {
                    currentIndex = 0; 
                    displayVocab();
                }
                playCurrentVocabAuto();
            }
        }

        function stopAutoPlay() {
            isPlaying = false;
            updateButtonState();
            window.speechSynthesis.cancel();
        }

        function goToCategoryPage() {
            stopAutoPlay();
            lessonPage.style.display = 'none';
            categoryPage.style.display = 'block';
        }

        // Event Listeners
        nextBtn.addEventListener('click', nextVocab);
        prevBtn.addEventListener('click', prevVocab);
        playPauseBtn.addEventListener('click', toggleAutoPlay);
        stopBtn.addEventListener('click', stopAutoPlay);
        backToCatBtn.addEventListener('click', goToCategoryPage);

        // Initial setup
        createCategoryButtons();
    </script>
</body>
</html>
